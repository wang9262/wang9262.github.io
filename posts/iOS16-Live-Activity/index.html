<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Vong"/><link rel="canonical" href="https://vonglo.cn/posts/iOS16-Live-Activity"/><meta name="twitter:url" content="https://vonglo.cn/posts/iOS16-Live-Activity"/><meta name="og:url" content="https://vonglo.cn/posts/iOS16-Live-Activity"/><title>iOS16 Live Activity 初体验 | Vong</title><meta name="twitter:title" content="iOS16 Live Activity 初体验 | Vong"/><meta name="og:title" content="iOS16 Live Activity 初体验 | Vong"/><meta name="description" content="记录iOS开发点滴～"/><meta name="twitter:description" content="记录iOS开发点滴～"/><meta name="og:description" content="记录iOS开发点滴～"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@Vong_HUST"/><meta name="twitter:creator" content="@Vong_HUST"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Vong"/><meta name="twitter:image" content="https://vonglo.cn/media"/><meta name="og:image" content="https://vonglo.cn/media"/><script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script></head><body class="article-detail"><div class="top-nav"><ul><li><a href="/">首页</a></li><li><a class="active" href="/posts">所有文章</a></li><li><a href="/about">关于</a></li></ul></div><main class="main"><header><div class="header-container"><div class="site-meta-container"><a class="avatar" href="/"><img src="/images/avatar.jpg"/></a><a href="/"><h2>Vong</h2></a><p class="site-subtitle">记录iOS开发点滴～</p><div class="social-icons-container"><ul><li><a href="https://weibo.com/vonglo" target="_blank"><img src="/images/weibo.svg"/></a></li><li><a href="https://twitter.com/Vong_HUST" target="_blank"><img src="/images/twitter.svg"/></a></li><li><a href="https://github.com/wang9262/" target="_blank"><img src="/images/github.svg"/></a></li><li><a href="mailto:Vong9262@gmail.com"><img src="/images/email.svg"/></a></li><li><a href="/feed.rss"><img src="/images/rss.svg"/></a></li></ul></div><a class="wechat-subscriber" href="/about"><img src="/images/wechat.png"/></a></div><nav><ul><li class="menu-item"><a href="/">首页</a></li><li class="menu-item"><a class="menu-item-active" href="/posts">所有文章</a></li><li class="menu-item"><a href="/about">关于</a></li><li class="menu-item"><a class="search-popup-trigger">搜索</a></li></ul><div class="spacer"></div></nav></div></header><div class="main-content"><article><div><h1>iOS16 Live Activity 初体验</h1></div><div><ul class="tag-list"><li class="tag variant-3"><a href="/tags/wwdc">WWDC</a></li><li class="tag tagdate">发布于2022年07月31日</li></ul><div class="content"><p>WWDC 2022 Keynote 中苹果给我们介绍了 iOS 16 中一个比较亮眼的更新：Live Activity（实时活动），开发者可以在锁屏页面上放置一个可以“实时”更新的 Widget，比如外卖或者打车应用，在开启实时活动之后我们可以在锁屏页上实时看到外卖小哥/司机与我们的距离及预计到达时间。但是这一 API 及对应功能并没有第一时间放出，而是随着 iOS 16 Beta4 一起放出：<a href="https://developer.apple.com/cn/news/?id=hi37aek8 "【实时活动现已推出 Beta 版本】"" target="_blank">【实时活动现已推出 Beta 版本】</a>。</p><img src="/media/iOS16-Live-Activity/16592392576265.png"/><p>这篇文章主要是对官方 API 做一个简单提炼，并梳理下一些需要注意的点。</p><h2>写在前面</h2><ul><li>Live Activity 功能及正式 API 不会随 iOS 16 的首个正式版本释出，而是在今年晚些时候释出，具体时间没有给；</li><li>只有在 Live Activity 正式释出后，才可提交带对应功能的 App 版本到 App Store；</li><li>Live Activity 仅 iPhone 可用；</li><li>下面提及到的代码及示例都是 Beta 版的，可能随时会发生变化，建议在正式版释出后着重关注</li></ul><blockquote><p>Live Activity 后续均使用实时活动来翻译。</p></blockquote><h2>实际使用/开发体验</h2><blockquote><p>设备及开发环境：iPhone 12 iOS 16 Beta 4、Xcode 14 Beta 4、macOS 12.4</p></blockquote><ol><li>当前版本（iOS16 Beta 4）锁屏页面展示实时活动，不需要用户授权也不需要用户手动添加，开启实时活动后会自动展示在锁屏页上，但是用户可以在设置中手动关闭。猜测后续大概率需要用户授权，不然可能会被某些开发者利用；</li><li>同一个应用可以展示多个实时活动，但是会被折叠（类似通知），锁屏页面可以有多个 app 同时展示，会按 app 分组，可以看下截图；</li></ol><img src="/media/iOS16-Live-Activity/16592392576325.png"/><ol start="3"><li>没有付费账号，还没尝试使用远程推送来更新/停止实时活动；</li><li>实时活动锁屏 UI 必须使用 SwiftUI，相对来说比较简单，实时活动组件的高度不能超过 220px（原文是 220 pixels，但实际测试发现是 220pt），否则系统会自动裁切；</li><li>基于 Widget，但刷新机制不一样，widget 是根据时间线来更新，而实时活动则不受这个控制，可以使用远程推送或者宿主应用代码来更新，暂时没看到更新频率相关限制；</li><li>因为是基于 Widget，所以还是可以给控件绑定不同 deep link，使其可以跳转到对应页面；</li><li>整体上来说实时活动的适配比较容易，重要的还是结合 App 的实际场景合理运用应该能取得不错效果，后续应该会有很多有创意的 idea 出现，可以期待一波。</li></ol><p>写了个 Demo，模拟地铁到站预估时间的场景，代码放在 <a href="https://github.com/wang9262/iOS16LiveActivityDemo "GitHub/iOS16LiveActivityDemo"" target="_blank">GitHub/iOS16LiveActivityDemo</a> 上了，有啥疑问可以留言或者提 issue。</p><hr><blockquote><p>以下内容主要对文档做个翻译.</p></blockquote><h2>实时活动的要求和约束</h2><ul><li>一个实时活动在应用或用户结束前能够存活<strong>8 个小时</strong>，如果 8 小时内没有结束，系统会自动结束该实时活动；</li><li>已结束的实时活动会在在锁屏页上保留<strong>4 个小时</strong>，之后系统会自动将其移除，当然期间用户也可以手动移除；</li><li>综上，一个实时活动在锁屏页上最长可以停留<strong>12 个小时</strong>；</li><li>实时活动有自己的沙盒，跟 Widget 不一样的一点是：它无法使用网络也不能接受地理位置更新；</li><li>我们可以在应用内使用 <code>ActivityKit</code> 来更新实时活动，也可以在实时活动的 Widget 中接收远程推送来更新，下面会具体说到；</li></ul><h2>让应用适配实时活动</h2><p>如果应用之前已经有 Widget，那么可以在已有的 Widget Extension 中添加实时活动的相关实现；如果之前没有的话可以新建一个。值得注意的是：实时活动并不是 widget，他们的更新机制有较大区别。上面也有提到，实时活动是通过应用内的 ActivityKit 或者远程推送来更新的，而 widget 则依赖系统的 timeline 机制。</p><p>下面是适配的相关步骤：</p><ol><li>创建一个 Widget Extension，如果已有，则可跳过这一步；</li></ol><img src="/media/iOS16-Live-Activity/16592392576383.png"/><ol start="2"><li>在 <code>Info.plist</code> 文件中添加一个键值对，key 为 <code>NSSupportsLiveActivities</code>，value 为 <code>YES</code>;</li></ol><img src="/media/iOS16-Live-Activity/16592392576429.png"/><ol><li>在代码里定义一组 <code>ActivityAttributes</code> 以及 <code>Activity.ContentState</code>,后续会用它们来开始、更新及结束实时活动；</li><li>创建 Widget 并返回一个 <code>ActivityConfiguration</code>；</li><li>添加开始、更新、结束实时活动的相关代码，并设计对应的 UI 样式；</li><li>运行查看效果。</li></ol><pre data-language="Swift" class="hljs"><code><span class="hljs-keyword">import</span> ActivityKit
<span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> WidgetKit

<span class="hljs-comment">// 示例代码，展示披萨配送的实时活动</span>

<span class="hljs-comment">// 继承 ActivityAttributes ，定义自定义属性用于widget UI展示</span>
<span class="hljs-comment">// Attributes 用来定义不可变的静态数据，比如这里的披萨数量和花费</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PizzaDeliveryAttributes</span>: <span class="hljs-title">ActivityAttributes</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">typealias</span> <span class="hljs-type">PizzaDeliveryStatus</span> = <span class="hljs-type">ContentState</span>

    <span class="hljs-comment">// ContentState用来封装动态（会发生变化的）数据，比如这里的配送员名字、预计送达时间</span>
    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentState</span>: <span class="hljs-title">Codable</span>, <span class="hljs-title">Hashable</span> </span>{
        <span class="hljs-keyword">var</span> driverName: <span class="hljs-type">String</span>
        <span class="hljs-keyword">var</span> estimatedDeliveryTime: <span class="hljs-type">Date</span>
    }
    <span class="hljs-keyword">var</span> numberOfPizzas: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">var</span> totalAmount: <span class="hljs-type">String</span>
}

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PizzaDeliveryActivityWidget</span>: <span class="hljs-title">Widget</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">WidgetConfiguration</span> {
        <span class="hljs-type">ActivityConfiguration</span>(attributesType: <span class="hljs-type">PizzaDeliveryAttributes</span>.<span class="hljs-keyword">self</span>) { context <span class="hljs-keyword">in</span>
            <span class="hljs-comment">// 根据数据创建锁屏widget UI，系统默认情况下文字颜色使用白色，然后使用最适合锁屏页的背景色；也可以像下面这样使用 activityBackgroundTint(_:) 来设置自定义颜色</span>
            <span class="hljs-type">VStack</span> {
                <span class="hljs-type">Text</span>(<span class="hljs-string">"\(context.attributes.numberOfPizzas) ordered for \(context.attributes.totalAmount)."</span>)
                <span class="hljs-type">HStack</span> {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"\(context.state.driverName) is on their way with your pizza!"</span>)
                    <span class="hljs-type">Text</span>(context.state.estimatedDeliveryTime, style: .timer)
                }
            }.activityBackgroundTint(<span class="hljs-type">Color</span>.cyan)

            <span class="hljs-comment">// 或者像这样使用ZStack的方式在最底下放置背景视图</span>
            <span class="hljs-type">ZStack</span> {
                <span class="hljs-type">Color</span>.cyan
                <span class="hljs-type">VStack</span> {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"\(context.attributes.numberOfPizzas) ordered for \(context.attributes.totalAmount)."</span>)
                    <span class="hljs-type">HStack</span> {
                        <span class="hljs-type">Text</span>(<span class="hljs-string">"\(context.state.driverName) is on their way with your pizza!"</span>)
                        <span class="hljs-type">Text</span>(context.state.estimatedDeliveryTime, style: .timer)
                    }
                }
            }.activitySystemActionForegroundColor(<span class="hljs-type">Color</span>.cyan)
        }
    }
}
</code></pre><p><strong>值得注意的是实时活动 Widget 的最大高度不能超过 220px（原文是 220 pixels，但实际测试发现是 220pt），否则系统会自动裁剪</strong>。</p><h2>检查实时活动是否可用</h2><p>由于实时活动仅在 iPhone 上生效，同时用户也可以在设置中手动关闭某个应用的实时活动，所以在使用前最好要做一个检测。</p><ul><li>使用 <code>areActivitiesEnabled</code> 来同步判断开始实时活动前是否显示锁屏 UI；</li><li>使用异步接口 <code>activityEnablementUpdates</code> 来检测用户授权状态的变更。</li></ul><blockquote><p>需要注意的是：每个应用可以开启若干个实时活动，同时系统也能展示多个 app 的实时活动；所以我们在启动、更新、结束实时活动时，也要考虑出错的情况以提供更好的用户体验。</p></blockquote><h2>启动实时活动</h2><p>应用在前台的时候，我们可以使用 <code>request(attributes:contentState:pushType:)</code> 方法来启动实时活动，对应参数 attributes 作为实时活动的初始值，<code>contentState</code> 作为动态变化的数据。如果应用实现了远程推送，也可以提供 <code>pushType</code> 参数，后面远程推送部分会讲到。</p><pre data-language="Swift" class="hljs"><code><span class="hljs-comment">// 启动实时活动示例代码</span>

<span class="hljs-comment">// 提供初始化值</span>
<span class="hljs-keyword">let</span> pizzaDeliveryAttributes = <span class="hljs-type">PizzaDeliveryAttributes</span>(numberOfPizzas: <span class="hljs-number">42</span>, totalAmount:<span class="hljs-string">"$420,-"</span>)

<span class="hljs-comment">// 提供动态变化数据，预估配送到达时间为1小时后</span>
<span class="hljs-keyword">let</span> initialContentState = <span class="hljs-type">PizzaDeliveryAttributes</span>.<span class="hljs-type">PizzaDeliveryStatus</span>(driverName: <span class="hljs-string">"Bill James"</span>, estimatedDeliveryTime: <span class="hljs-type">Date</span>().addingTimeInterval(<span class="hljs-number">60</span> * <span class="hljs-number">60</span>))

<span class="hljs-comment">// 启动实时活动，这里 pushType 暂时置 nil</span>
<span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">let</span> deliveryActivity = <span class="hljs-keyword">try</span> <span class="hljs-type">Activity</span>&lt;<span class="hljs-type">PizzaDeliveryAttributes</span>&gt;.request( attributes: pizzaDeliveryAttributes, contentState: initialContentState, pushType: <span class="hljs-literal">nil</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Requested a pizza delivery Live Activity \(deliveryActivity.id)"</span>)
} <span class="hljs-keyword">catch</span> (<span class="hljs-keyword">let</span> error) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error requesting pizza delivery Live Activity \(error.localizedDescription)"</span>)
}
</code></pre><h2>更新实时活动</h2><p>启动实时活动后我们可以得到一个 <code>Activity</code> 实例，接着我们可以调用该实例 <code>update(using:)</code> 方法来更新实时活动。我们也可以通过 <code>Activity。activities</code> 方法来获取当前所有的实时活动实例。</p><blockquote><p>更新一个已结束的实时活动会被忽略。</p></blockquote><pre data-language="Swift" class="hljs"><code><span class="hljs-keyword">let</span> updatedDeliveryStatus = <span class="hljs-type">PizzaDeliveryStatus</span>(driverName: <span class="hljs-string">"Anne Johnson"</span>, estimatedDeliveryTime: <span class="hljs-type">Date</span>().addingTimeInterval(<span class="hljs-number">60</span> * <span class="hljs-number">60</span>))
<span class="hljs-keyword">do</span> {
    <span class="hljs-comment">// deliveryActivity是上面启动时拿到的Activity实例</span>
    <span class="hljs-comment">// 更新的数据大小不能超过4KB</span>
    <span class="hljs-keyword">try</span> await deliveryActivity.update(using: updatedDeliveryStatus)
} <span class="hljs-keyword">catch</span>(<span class="hljs-keyword">let</span> error) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error updating activity \(error.localizedDescription)"</span>)
}
</code></pre><h3>内容更新动画</h3><p>系统会忽略实时活动 widget 的所有动画修饰符，比如<code>withAnimation(_:_:)</code>、<code>animation(_:value:)</code>。系统会自动给动态变化的内容添加动画，比如会给 Text 添加模糊的过渡效果，给 Image 以及 SF Symbol 添加过渡动画。如果更新过程中有视图的添加或移除，系统也会给他们加上淡入淡出的过渡动画。</p><p>我们也可以使用系统内置的过渡动画：<code>opacity</code>、<code>move(edge:)</code>、<code>slide</code>、<code>push(from:)</code> 或者将它们组合使用，对于那种计时的 Text，我们也可以使用 <code>numericText(countsDown:)</code> 修饰符来做文本变化动画。</p><h2>结束实时活动</h2><p>在关联的事件/任务结束时，我们也应该结束对应的实时活动。上面也有提到结束后的实时活动在用户手动移除前还会在锁屏页上停留 4 小时。当然我们也可以使用 <code>end(using:dismissalPolicy:)</code> 方法指定实时活动结束后的移除策略。</p><pre data-language="Swift" class="hljs"><code><span class="hljs-keyword">let</span> updatedDeliveryStatus = <span class="hljs-type">PizzaDeliveryStatus</span>(driverName: <span class="hljs-string">"Anne Johnson"</span>, estimatedDeliveryTime: <span class="hljs-type">Date</span>())
<span class="hljs-keyword">do</span> {
    <span class="hljs-comment">// 指定移除策略为默认，即用户手动移除前停留4小时</span>
    <span class="hljs-comment">// 还有 im/mediate 即立即移除，以及可以指定一个移除的时间 after(Date)</span>
    <span class="hljs-keyword">try</span> await deliveryActivity.end(using: updatedDeliveryStatus, dismissalPolicy: .<span class="hljs-keyword">default</span>)
} <span class="hljs-keyword">catch</span>(<span class="hljs-keyword">let</span> error) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error ending activity \(error.localizedDescription)"</span>)
}
</code></pre><p>需要注意的是，用户可以在任意时间将实时活动从锁屏页面移除，该操作相应的也会结束对应的实时活动，但是他不会取消用户在启动实时活动时的一些行为。比如上面披萨配送示例里，尽管用户可以移除披萨配送信息的实时活动，但不代表取消了对应的披萨订单。</p><h2>使用远程推送更新/结束实时活动</h2><p>除了上述的更新和结束的方式，我们还可以通过推送通知来实现，具体实现流程和逻辑其实普通的推送通知区别不大，这里不做赘述。有一点不同的是：实时活动不需要使用 <code>registerForRemoteNotifications()</code> 来注册推送通知，我们使用 ActivityKit 来获取推送 token。具体流程如下：</p><ol><li>启动实时活动时需要指定 pushType 参数为 <code>.token</code>，或者不传该参数（参数默认值就为 <code>.token</code>）；</li><li>成功启动后，将拿到的 <code>pushToken</code> 发送给服务端，后续使用该 <code>token</code> 来给对应实时活动发送推送通知；</li><li>服务端使用对应 token 发送推送时需要必须要指定 <code>content-state</code> 字段的值和代码里的 <code>Activity.ContentState</code> 匹配上，这样系统才能解码对应 JSON 内容来更新实时活动；</li><li>使用推送内容来更新或结束对应的实时活动；</li><li>使用 <code>pushTokenUpdates</code> 监听实时活动实例的 pushToken 变化，并将新值发送给服务端同时废弃旧值，</li><li>当实时活动结束后，通知服务端废弃对应 token。</li></ol><p>模拟器上测试实时活动的远程推送需要使用 T2 或 M 系列芯片的 Mac，并且要求系统 &gt;=macOS 13。</p><p>如果你不清楚自己电脑是否是 T2，可以通过如图方式确认，按住 Option 键，并点击左上角  查看 系统信息-&gt;控制器即可 <img src="/media/iOS16-Live-Activity/16592392576470.png"/></p><p>也可以使用直接在下方列表查找，基本上 18 年后的都支持。</p><p>下面是一个对应上方披萨配送示例的 push payload 数据</p><pre data-language="JSON" class="hljs"><code>{
    <span class="hljs-attr">"aps"</span>: {
        <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1650998941</span>,
        <span class="hljs-attr">"event"</span>: <span class="hljs-string">"update"</span>,
        <span class="hljs-comment">// 这里和上述 PizzaDeliveryAttributes.ContentState 里的字段一一对应</span>
        <span class="hljs-attr">"content-state"</span>: {
            <span class="hljs-attr">"driverName"</span>: <span class="hljs-string">"Anne Johnson"</span>,
            <span class="hljs-attr">"estimatedDeliveryTime"</span>: <span class="hljs-number">1659416400</span>
        }
    }
}
</code></pre><h3>跟新追踪</h3><p>Activity 这个类除了拥有一个 id 的唯一标识外，还提供了一系列的状态变化的监听，比如内容状态、活动状态以及 push token 的变更。我们可以使用对应的监听来更新应用，让实时活动与应用保持同步。</p><ul><li>使用 <code>activityStateUpdates</code> 来监听实时活动的状态，判断是否已结束；</li><li>使用 <code>contentState</code> 来监听实时活动的动态内容变化；</li><li>使用 <code>pushTokenUpdates</code> 来监听实时活动的 push token 变化。</li></ul><h2>查看实时活动列表</h2><p>一个应用可以同时开启多个实时活动，比如用户可以同时关注多个球赛直播，我们可以使用 <code>activityUpdates</code> 来获取当前正在进行中的实时活动。 在某些场景下我们可能也会用到这个方法来获取当前进行中的实时活动，比如应用闪退后再次打开应用，如果想要结束或更新某些实时活动，就可以通过这个方法来获取到所有的实时活动。</p><pre data-language="Swift" class="hljs"><code><span class="hljs-comment">// Fetch all ongoing pizza delivery activities.</span>
<span class="hljs-keyword">let</span> activityStream = <span class="hljs-type">Activity</span>&lt;<span class="hljs-type">PizzaDeliveryAttributes</span>&gt;.activityUpdates() <span class="hljs-keyword">for</span> await activity <span class="hljs-keyword">in</span> activityStream { <span class="hljs-built_in">print</span>(<span class="hljs-string">"Pizza delivery details: \(activity.description)"</span>) }
</code></pre></div><div class="license">本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC 4.0许可协议</a>。转载请注明出处和作者。</div></div></article><div class="supporter"><p>关注微信公共号<a href="/about/">Vong</a>或在微博上关注<a href="https://weibo.com/VongLo">@Vong_HUST</a>，永远不会错过新内容！ 您的<a href="/about/">支持和鼓励</a>将为我的博客写作增添更多的动力!</p><img src="/images/wechat.png"/><div class="label">动态更新</div></div><div class="item-navigator"><table><tr><td></td><td class="next-item"><a href="/posts/Xcode-Condition-Build">iOS 中资源的条件编译</a></td></tr></table></div><script src="https://giscus.app/client.js" data-repo="wang9262/Blog-Comments" data-repo-id="MDEwOlJlcG9zaXRvcnk5OTAxNDQ4MQ==" data-category="General" data-category-id="DIC_kwDOBebXUc4CQzO5" data-mapping="title" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="top" data-theme="preferred_color_scheme" data-lang="zh-CN" data-loading="lazy" async></script></div><div class="right-side-nav"><div class="tool-button-container"><div class="actionButton twitter" onclick="window.open('https://twitter.com/intent/tweet?text=iOS16 Live Activity 初体验&url=https://vonglo.cn/posts/iOS16-Live-Activity&via=Vong_HUST','target','');"></div><div class="actionButton comment" onclick="$('html,body').animate({scrollTop: $('.giscus').offset().top }, {duration: 500,easing:'swing'})"></div><div class="actionButton top" onclick="$('html,body').animate({scrollTop: 0 }, {duration: 500,easing:'swing'})"></div></div><div class="toc-side-bar"></div><script src="/Script/toc.js"></script></div></main><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autofocus placeholder="输入你要搜索的内容..." spellcheck="false" type="search" class="search-input" id="local-search-input"/></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div><footer><p>Copyright &copy; Vong 2022 Generated using <a href="https://github.com/johnsundell/publish" target="_blank">Publish</a></p><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZHSZ71NFYK"></script><script src="/Script/google_analyse.js"></script><script src="/Script/baidu_analyse.js"></script><script src="/Script/search.js"></script></footer></body></html>