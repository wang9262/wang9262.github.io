<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Vong"/><link rel="canonical" href="https://wang9262.github.io/posts/Xcode-Condition-Build"/><meta name="twitter:url" content="https://wang9262.github.io/posts/Xcode-Condition-Build"/><meta name="og:url" content="https://wang9262.github.io/posts/Xcode-Condition-Build"/><title>iOS ä¸­èµ„æºçš„æ¡ä»¶ç¼–è¯‘ | Vong</title><meta name="twitter:title" content="iOS ä¸­èµ„æºçš„æ¡ä»¶ç¼–è¯‘ | Vong"/><meta name="og:title" content="iOS ä¸­èµ„æºçš„æ¡ä»¶ç¼–è¯‘ | Vong"/><meta name="description" content="Vong,iOS,Performance,æ€§èƒ½,Swift,SwiftUI,Objective-C"/><meta name="twitter:description" content="Vong,iOS,Performance,æ€§èƒ½,Swift,SwiftUI,Objective-C"/><meta name="og:description" content="Vong,iOS,Performance,æ€§èƒ½,Swift,SwiftUI,Objective-C"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Vong"/><meta name="twitter:image" content="https://wang9262.github.io/media"/><meta name="og:image" content="https://wang9262.github.io/media"/></head><body class="item-page"><header><div class="wrapper"><div class="logo"><a href="/"><h2>Vong</h2></a></div><nav><ul><li><a href="/">é¦–é¡µ</a></li><li><a class="selected" href="/posts">æ–‡ç« </a></li><li><a href="/about">å…³äº</a></li><li><a href="/tags">æ ‡ç­¾</a></li></ul></nav></div></header><div class="wrapper"><div class="post-actions"><a href="https://twitter.com/intent/tweet?text=iOS ä¸­èµ„æºçš„æ¡ä»¶ç¼–è¯‘&url=https://wang9262.github.io/posts/Xcode-Condition-Build&via=Vong_HUST" target="_blank" rel="noreferrer"><img class="twitterIntent" src="/images/twitter.svg"/></a></div><article><div><h1>iOS ä¸­èµ„æºçš„æ¡ä»¶ç¼–è¯‘</h1></div><div><ul class="tag-list"><li class="tag tagdate">2020-11-21</li><li class="tag variant-4"><a href="/tags/xcode">Xcode</a></li></ul><div class="content"><p>æ—¥å¸¸å¼€å‘ä¸­å¸¸å¸¸é‡åˆ°æŸäº›ç±»åŠå…¶å¼•ç”¨çš„èµ„æºæ–‡ä»¶ä»…åœ¨ <code>Debug</code> æˆ–å†…æµ‹ç‰ˆæœ¬ä¸­ç”Ÿæ•ˆï¼Œè€Œä¸å¸Œæœ›å¸¦åˆ°çº¿ä¸Šç‰ˆæœ¬ã€‚å› ä¸ºä¸€æ¥ä¼šå¢åŠ åŒ…ä½“ç§¯ï¼ŒäºŒæ¥ä¼šæŠŠä¸€äº›å†…éƒ¨åŠŸèƒ½çš„ç›¸å…³æ¥å£æš´éœ²ï¼Œå¯¼è‡´å¯èƒ½çš„ä¸€äº›åŠ¨æ€è°ƒè¯•ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰é¿å…çš„æ–¹æ¡ˆå‘¢ï¼Ÿ</p><h2>Pod</h2><p>ç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼Œé€šå¸¸çš„åšæ³•æ˜¯æŠŠå¯¹åº”åŠŸèƒ½æŠ½æˆå•ç‹¬çš„ <code>pod</code> åº“ï¼Œç„¶åä»… <code>Debug</code> æ¨¡å¼æ‰é›†æˆåˆ°ä¸»å·¥ç¨‹ï¼Œå‘å‡ºå»çš„ç‰ˆæœ¬ä¸é›†æˆã€‚é€šå¸¸æ–¹å¼å¦‚ä¸‹ï¼Œä»¥ <code>FLEX</code> ä¸ºä¾‹ï¼š</p><pre data-language="ruby"><code>pod <span class="hljs-string">'FLEX'</span>, <span class="hljs-string">'~&gt; 2.0'</span>, <span class="hljs-symbol">:configurations</span> =&gt; [<span class="hljs-string">'Debug'</span>]
</code></pre><p>ä½†æ˜¯å¦‚æœæŸäº›å¼ºè€¦åˆä¸»å·¥ç¨‹æ— æ³•æ‹†æˆç‹¬ç«‹ <code>pod</code> çš„åŠŸèƒ½ï¼Œè¿™ç§æ–¹å¼å¯èƒ½å°±ä¸å†é€‚ç”¨äº†ã€‚</p><h2>æ¡ä»¶ç¼–è¯‘</h2><p><code>pod</code> è¿™æ¡è·¯èµ°ä¸é€šï¼Œæœ‰æ²¡æœ‰å…¶ä»–æ–¹å¼å‘¢ï¼Ÿç­”æ¡ˆä¹Ÿæ˜¯è‚¯å®šçš„ï¼Œä¹Ÿæ˜¯å¤§å®¶ç»å¸¸é‡‡ç”¨çš„æ–¹å¼ï¼Œä½¿ç”¨æ¡ä»¶ç¼–è¯‘ã€‚ä¹Ÿå°±æ˜¯å°†å¯¹åº”ç±»æ–‡ä»¶åŠå¼•ç”¨åˆ°çš„åœ°æ–¹ä½¿ç”¨ç±»ä¼¼ä¸‹é¢çš„æ–¹å¼ï¼š</p><pre data-language="undefined"><code>
#if DEBUG
// æ”¾å…¥ä»…Debugæ¨¡å¼ä¸‹ç”Ÿæ•ˆçš„ä»£ç 
#endif
</code></pre><p>ä»¥ä¸Šä¸¤ç§æ–¹å¼å°†å¤§éƒ¨åˆ†åœºæ™¯ <code>cover</code> ä½äº†ï¼Œä½†æ˜¯å‡è®¾å¯¹åº”çš„ç±»æ–‡ä»¶è¿˜å¼•ç”¨åˆ°äº†å›¾ç‰‡ã€<code>Storyboard</code>ã€<code>Xib</code> ç­‰èµ„æºæ—¶ï¼Œè¯¥å¦‚ä½•è®©è¿™äº›èµ„æºä»…åœ¨ <code>Debug</code> ä¸‹æ‰å‚ä¸ç¼–è¯‘ï¼Œè€Œå…¶ä»–åœºæ™¯ä¸å‚ä¸ç¼–è¯‘å‘¢ï¼Ÿ</p><h2>Xcode Build Options</h2><p>æ—¢ç„¶éƒ½å†™äº†è¿™ç¯‡æ–‡ç« äº†ï¼Œé‚£ç­”æ¡ˆä¹Ÿæ˜¯è‚¯å®šçš„ï¼Œå°±æ˜¯ä½¿ç”¨ <code>Xcode</code> æä¾›çš„ä¸€ä¸ªç¼–è¯‘é€‰é¡¹ <code>Excluded Source File Names</code> æ¥å°†ä¸éœ€è¦çš„èµ„æºæ’é™¤ã€‚</p><img src="/media/2020-03-30/15855806858197.jpg"/><blockquote><p>ç¡®åˆ‡æ¥è¯´è¿™ä¸ªç¼–è¯‘é€‰é¡¹æ˜¯ <code>Xcode 9</code> æ‰å¼•å…¥çš„ï¼Œä¹‹å‰ç‰ˆæœ¬éœ€è¦è‡ªè¡Œå®šä¹‰ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª<a href="https://stackoverflow.com/a/41495430">å›ç­”</a>ã€‚ æ‘˜å½•ä¸€æ®µæ¥è‡ª<a href="https://xcodebuildsettings.com/#excluded_source_file_names">Xcode Build Settings</a>çš„è§£é‡Š <img src="/media/2020-03-30/15855826179239.jpg" alt="-w849"/></p></blockquote><p>å‡è®¾æœ‰ä¸‹é¢ç›®å½•ç»“æ„çš„å·¥ç¨‹</p><pre data-language="undefined"><code>
# ä½¿ç”¨ tree å‘½ä»¤è¡Œå¾—åˆ°ä¸‹é¢ç»“æ„
â”œâ”€â”€ ConditionBuildDemo
â”‚Â Â  â”œâ”€â”€ A
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Debug
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DebugA.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ icon_test@2x.png
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Sub
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DeepSub
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DeepSubA.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SubDebugA.swift
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ icon.png
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ SubA.xcassets
â”‚Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Contents.json
â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ logo.imageset
â”‚Â Â  â”‚Â Â  â”‚Â Â          â”œâ”€â”€ Contents.json
â”‚Â Â  â”‚Â Â  â”‚Â Â          â””â”€â”€ logo@2x.png
â”‚Â Â  â”‚Â Â  â””â”€â”€ ModelA.swift
â”‚Â Â  â”œâ”€â”€ B
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Debug
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DebugB.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ ModelB.swift
</code></pre><pre data-language="Swift"><code><span class="hljs-comment">//æµ‹è¯•ä»£ç </span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">super</span>.viewDidLoad()
    <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">ModelA</span>()
    <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">ModelB</span>()
    <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">DebugA</span>()
    <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">DebugB</span>()
    <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">SubDebugA</span>()
    <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">DeepSubA</span>()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">UIImage</span>.<span class="hljs-keyword">init</span>(named: <span class="hljs-string">"logo"</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"has logo"</span>)
    }
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">UIImage</span>.<span class="hljs-keyword">init</span>(named: <span class="hljs-string">"icon"</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"has icon"</span>)
    }
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-number">_</span> = <span class="hljs-type">UIImage</span>.<span class="hljs-keyword">init</span>(named: <span class="hljs-string">"icon_test"</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"has icon_test"</span>)
    }
}
</code></pre><blockquote><p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿éªŒè¯ï¼Œç›´æ¥è®¾ç½® <code>Debug Configuration</code> ä¸‹çš„ <code>Excluded Source File Names</code>ã€‚å¦‚å›¾ <img src="/media/2020-04-04/15859854120322.jpg" alt="-w984"/> å®é™…ç”¨åˆ°é¡¹ç›®ä¸­å¯æ ¹æ®è‡ªå·±é¡¹ç›®è‡ªè¡Œå¯¹ä¸åŒ <code>Configuratio</code> è¿›è¡Œé…ç½®ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬æ¥æ¢ç´¢ä¸‹è¿™ä¸ªè·¯å¾„çš„é…ç½®è§„åˆ™ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æ’é™¤ <code>A</code> å’Œ <code>B</code> ç›®å½•ä¸‹çš„ <code>Debug</code> æ–‡ä»¶å¤¹çš„æ‰€æœ‰å†…å®¹ï¼ŒæŒ‰ç…§å¸¸è§„æ€è·¯ï¼Œç†æ‰€å½“ç„¶ç›´æ¥å†™ä¸Š <code>Debug/*</code>ï¼Œç„¶åç¼–è¯‘å‘ç°ä¸Šé¢çš„æµ‹è¯•ä»£ç ç¼–è¯‘æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°ç±» <code>DebugA</code>,<code>DebugB</code>ã€‚</p><pre data-language="undefined"><code>
ViewController.swift:18:22: Use of unresolved identifier 'DebugA'
ViewController.swift:19:22: Use of unresolved identifier 'DebugB'
</code></pre><p>å±è”½æ‰è¿™ä¸¤å¤„ä»£ç è¿è¡Œï¼Œå‘ç° <code>has logo</code> å’Œ <code>has icon</code> éƒ½è¾“å‡ºäº†ã€‚</p><p>æ‰€ä»¥ <code>Debug/*</code> åªèƒ½å±è”½ <code>Debug</code> æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå­æ–‡ä»¶å¤¹æ— æ³•å±è”½ï¼ˆå› ä¸º <code>.xcasset</code> å®è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æ— æ³•è¢«å±è”½ï¼‰ã€‚</p><p>å¦‚æœç¡®å®æƒ³è¦å±è”½ <code>Debug</code> ä¸‹æ‰€æœ‰å†…å®¹ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿç›®å‰æˆ‘è¿˜æ²¡æ‰¾åˆ°æ¯”è¾ƒå¥½çš„æ–¹å¼ğŸ˜‚ï¼Œåªèƒ½ä¸€ä¸ªä¸ªç›®å½•æ’é™¤äº†ã€‚æ‹¿ä¸Šé¢çš„çš„ç»“æ„æ¥è¯´ï¼Œå¦‚æœè¦æ’é™¤æ–‡ä»¶å¤¹ <code>A</code> <code>B</code> ç›®å½•ä¸‹çš„ <code>Debug</code>ï¼Œå¯èƒ½å°±å¾—è¿™æ ·é…ç½® <code>Debug/*</code> <code>Debug/*/*</code> <code>Debug/*/*/*</code>ï¼Œå¦‚å›¾</p><img src="/media/2020-04-04/15859945623293.jpg" alt="-w589"/><p>æ‰€ä»¥è¿™é‡Œæ”¯æŒçš„åŒ¹é…æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p><ul><li>æ–‡ä»¶åå®Œå…¨åŒ¹é…ï¼Œæ¯”å¦‚ <code>ModelA.Swift</code></li><li>é€šé…ç¬¦ï¼Œå¦‚ <code>Debug/*.Swift</code> <code>Debug/*.*</code> <code>*/Debug/*</code> <code>Debug/*/*/*.png</code></li></ul><h2>Development Assets</h2><img src="/media/2020-04-04/15859936373369.jpg" alt="-w1219"/><blockquote><p>å…³äºè¿™ä¸ªé…ç½®é¡¹å¯ä»¥æŸ¥çœ‹ <a href="https://developer.apple.com/videos/play/wwdc2019/233/">WWDC 2019 Session 233 Mastering Xcode Previews</a></p></blockquote><p><code>Xcode 11</code> æ–°å¢äº†ä¸€ä¸ª <code>Development Assets</code> çš„é…ç½®é¡¹ï¼Œç®€å•å°è¯•äº†ä¸‹ï¼Œä½†æ˜¯ä¼¼ä¹æ²¡æœ‰ç”Ÿæ•ˆã€‚æˆ‘æŠŠä¸Šé¢ç›®å½•ç»“æ„ä¸­çš„ <code>SubA.xcassets</code> åŠ åˆ°é‡Œé¢ï¼Œç„¶åç”¨<code>release</code> æ¨¡å¼è·‘èµ·æ¥è¿˜æ˜¯èƒ½è¯»åˆ°å¯¹åº”çš„å›¾ç‰‡ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å§¿åŠ¿ä¸å¯¹ã€‚</p><p>å…¶å®é‡ç‚¹è¿˜æ˜¯ <code>Excluded Source File Names</code> è¿™ä¸ªç¼–è¯‘é…ç½®ï¼Œæœ‰æ—¶å€™ä¼šæœ‰äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p></div></div></article><div class="item-navigator"><table><tr><td class="previous-item"><a href="/posts/Blog-based-on-Publish">åŸºäº Publish æ­å»ºåšå®¢</a></td><td class="next-item"><a href="/posts/An-Abnormal-Swift-Crash">èŠèŠæœ€è¿‘é‡åˆ°çš„ä¸€ä¸ªCrash</a></td></tr></table></div><div id="gitalk-container"></div>
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script type="text/javascript">
var gitalk = new Gitalk({
    clientID: 'b56f11f2c9cf1bbc87ac',
    clientSecret: '98ade66fe9ef75f9f8c92cd0b6f002e0a1be2f8c',
    repo: 'Blog-Comments',
    owner: 'wang9262',
    admin: ['wang9262'],
    id: 'iOS ä¸­èµ„æºçš„æ¡ä»¶ç¼–è¯‘',
});
gitalk.render('gitalk-container');
</script><footer><p>Copyright &copy;Vong 2021 </p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><ul class="icon"><li><a href="https://twitter.com/fatbobman"><img class="twitter" src="/images/twitter.svg"/></a></li><li><a href="https://github.com/fatbobman/"><img src="/images/github.svg"/></a></li><li><a href="https://www.zhihu.com/people/fatbobman3000"><img src="/images/zhihu.svg"/></a></li><li><a href="/feed.rss"><img src="/images/rss.svg"/></a></li></ul><script>
    // dynamic User by Hux
    var _gaId = 'UA-56148425-1';
    var _gaDomain = 'wang9262.github.io';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>

<!-- Baidu Tongji -->

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8aa6c37a6671fca3a595bb5c714cafc7";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
</footer></div></body></html>